<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carte Digitale - Le Z</title>

    <!-- Import Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
            text-align: center;
            background: url("fond.jpg") no-repeat center center fixed;
            background-size: cover;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* Icônes des apps */
        .icons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            max-width: 320px;
            margin: 0 auto 50px;
        }

        .icons a {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fff;
            border-radius: 80%;
            width: 70px;
            height: 70px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
            text-decoration: none;
        }

        .icons a:hover {
            transform: scale(1.1);
        }

        .icons img {
            width: 80px;
            height: 80px;
        }

        footer {
            margin-top: auto;
            margin-bottom: 20px;
        }

        .logo {
            width: 20px;
            opacity: 0.8;
        }

        /* Photo circulaire avec centrage automatique */
        #image-container {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            overflow: hidden;
            margin: 40px auto 15px;
            border: 4px solid #444;
            position: relative;
        }

        #image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>

    <!-- Photo de profil -->
    <div id="image-container">
        <img id="image" src="photo-profil.png" alt="Photo de profil">
    </div>
    <input type="file" id="inputImage" accept="image/*">

    <!-- Nom -->
    <h1>Le Z</h1>

    <!-- Icônes des applis -->
    <div class="icons">
        <a href="vcard.vcf"><img src="vcard.png" alt="vCard"></a>
        <a href="https://facebook.com/"><img src="facebook.png" alt="Facebook"></a>
        <a href="https://wa.me/2290197456565?text=Bonjour%20Le%20Z,%20je%20suis%20intéressé%20par%20le%20Ztag"
            target="_blank"><img src="whatsapp.png" alt="WhatsApp"></a>
        <a href="https://snapchat.com/"><img src="snapchat.png" alt="Snapchat"></a>
        <a href="https://tiktok.com/"><img src="tiktok.png" alt="TikTok"></a>
        <a href="https://instagram.com/"><img src="instagram.png" alt="Instagram"></a>
    </div>

    <!-- Footer -->
    <footer>
        <p style="margin:0; font-weight:600;">Ztag by
            <a href="https://wa.me/2290197456565?text=Bonjour%20Le%20Z,%20je%20suis%20intéressé%20par%20le%20Ztag"
                target="_blank">
                <img src="logo.png" alt="Logo" class="logo">
            </a>
        </p>
    </footer>

    <!-- JS pour détection visage avec face-api.js -->
    <script src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
    <script>
        const input = document.getElementById('inputImage');
        const image = document.getElementById('image');

        Promise.all([
            faceapi.nets.tinyFaceDetector.loadFromUri('https://justadudewhohacks.github.io/face-api.js/models')
        ]).then(() => {
            input.addEventListener('change', async (e) => {
                const file = e.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = async function (event) {
                    image.src = event.target.result;

                    image.onload = async function () {
                        const detection = await faceapi.detectSingleFace(image, new faceapi.TinyFaceDetectorOptions());
                        if (detection) {
                            const { x, y, width, height } = detection.box;
                            const centerX = x + width / 2;
                            const centerY = y + height / 2;
                            const container = document.getElementById('image-container');
                            const scale = container.offsetWidth / width;

                            image.style.width = `${image.naturalWidth * scale}px`;
                            image.style.height = `${image.naturalHeight * scale}px`;
                            image.style.left = `${container.offsetWidth / 2 - centerX * scale}px`;
                            image.style.top = `${container.offsetHeight / 2 - centerY * scale}px`;
                        } else {
                            image.style.objectPosition = "center";
                        }
                    }
                };
                reader.readAsDataURL(file);
            });
        });
    </script>

</body>

</html>